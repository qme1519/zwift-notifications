<html>

<head>
    <title>Zwift notifications</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>
    var xmlhttp = new XMLHttpRequest();
      function savePreferences() {
        preferences = ""
        for (i = 0; i < 5; i++) {
                if (document.getElementById(i).checked == true) {
                    preferences = preferences + document.getElementById(i).value + ","
                }
            }
            console.log(preferences)

          xmlhttp.open("GET", "upload_preferences.php?preferences="+preferences, true);
          xmlhttp.send();
        };
        xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                if (this.responseText == "Success") {
                    location.reload()
                } else {
                    if (this.responseText == "Error") {
                        alert("An error has occured")
                        }
                    }
                }
            }
    </script>
</head>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>


<body>
  <div class="row">
    <div class="col align-self-start"></div>
  <div class="col-md-auto align-self-center">
    <h1>Select filters</h1>
    After you have selected all your filters that you would like to apply, click 'submit'.
    <br>
    A file will be downloaded with your saved preferences. Put the file in the same folder as you zwift.py script.
    <form id="result_list" action="javascript:void(0);" onsubmit="savePreferences()">
      <h2>Select length</h2>
      <div class='form-check'>
        <input class='form-check-input' type='checkbox' id='0' value='KM_30'>
        <label class='form-check-label' for='KM_30'>30 km</label>
      </div>
      <div class='form-check'>
        <input class='form-check-input' type='checkbox' id='1' value='KM_60'>
        <label class='form-check-label' for='KM_60'>60 km</label>
      </div>
      <div class='form-check'>
        <input class='form-check-input' type='checkbox' id='2' value='KM_CRAZY'>
        <label class='form-check-label' for='KM_CRAZY'>Extra long</label>
      </div>
      <h2>Select incline</h2>
      <div class='form-check'>
        <input class='form-check-input' type='checkbox' id='3' value='ROUTE_FLAT'>
        <label class='form-check-label' for='ROUTE_FLAT'>Flat</label>
      </div>
      <div class='form-check'>
        <input class='form-check-input' type='checkbox' id='4' value='ROUTE_HILLY'>
        <label class='form-check-label' for='ROUTE_HILLY'>Hilly</label>
      </div>
      <button type='submit' class='btn btn-primary'>Submit</button>
    </form>
</form>
</div>
<div class="col align-self-end"></div>
</div>
</body>
